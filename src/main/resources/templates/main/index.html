<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gen.GG</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body>
    <!-- ìƒë‹¨ ë©”ë‰´ -->
    <header class="navbar">
        <nav class="nav-left">
            <a th:each="navElement : ${navList}"
               th:href="${navElement.get('href')}"
               th:utext="${navElement.get('title')}"
            ></a>
        </nav>
        <div class="nav-right">
            <i class="icon-user">ğŸ‘¤</i>
            <i class="icon-lang">ğŸŒ</i>
        </div>
    </header>

    <!-- ì´ˆë¡ìƒ‰ ë°°ë„ˆ -->
    <div class="banner">
        <span class="patch">Patch 2.22</span>
        <span>Gen.GG ì‹ ê·œ ì—…ë°ì´íŠ¸ - ì²« ë¼ì¸ì „ ì½”ì¹­ ì¶œì‹œ</span>
        <span class="arrow">â†’</span>
    </div>

    <!-- ì¤‘ì•™ ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main">
        <img th:src="@{/images/logo.png}" alt="Gen.G ë¡œê³ " class="logo">
        <div class="search-box">
            <form th:action="@{/profile}" id="profileForm" method="get">
                <select id="countrySelect">
                    <option th:each="country : ${countryList}" th:text="${country}"
                            th:selected="${selectedCountry == country}"
                            id="option"></option>
                </select>
                <!-- ë„ì–´ì“°ê¸° ìˆë“  ì—†ë“  ê²€ìƒ‰ ê°€ëŠ¥ -->
                <input type="text" id="keyword" placeholder="ì†Œí™˜ì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                <button type="submit">ğŸ”</button>
            </form>
        </div>
    </main>


<script>
    const form = $('#profileForm');
    const input = $('#keyword');
    const countrySelect = $('#countrySelect');

    form.submit(function(e){
        e.preventDefault();
        const keyword = input.val().trim();
        const country = countrySelect.val().toLowerCase();
        if(keyword === "") return;

        const encodeKeyword = encodeURIComponent(keyword);

        location.href = `/ko/${country}/profile/${encodeKeyword}`;
    });

    countrySelect.on('change', function(){
        let lowerCaseValue = this.value.toString().toLowerCase();
        const url = `/ko/${lowerCaseValue}/home`;
        window.history.pushState({}, '', url);
    });

</script>
</body>
</html>
